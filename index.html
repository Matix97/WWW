<!DOCTYPE HTML>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Sumowanko</title>

  <!-- Importuj jQuery -->
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

  <!-- Importuj AngularJS -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js"></script>

  <!-- Importuj Booststrap -->
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

  <!-- Importuj kod aplikacji -->
  <script type="text/javascript" src="js/app.js"></script>
  <link href="css/app.css" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="js/xeMod.js"></script>

  <!-- Importuj xeditable-->
  <link href="css/xeditable.css" rel="stylesheet">
  <script src="js/xeditable.js"></script>
</head>

<body>
  <!-- ten blok definiuje sekcję aplikacji userApp -->

  <div ng-app="userApp">

    <!-- Ten blok definiuje kontroler UserCtrl -->
    <div ng-controller="UserCtrl">
      <table class="table table-bordered">
        <thead>
          <th>Operacje</th>
          <th>Nazwisko i imie</th>
          <th>Nr indeksu</th>
          <th>JavaScript</th>
          <th>jQuery</th>
          <th>PHP</th>
          <th>Suma</th>
          <th ng-if="users.length >0"></th>
        </thead>
        <!-- prezentacja zawartości modelu w każdym wierszu osobny obiekt użytkownika -->
        <tbody ng-repeat="user in users" ng-switch on="user.state">

          <!-- Szablon edycji użytkownika pokazywany warunkowo -->
          <tr ng-switch-when="edit">
            <td>
              <input type="button" class="btn btn-primary" ng-click="editUser(user);" value="Edit" />
            </td>
            <td>
              <input type="text" class="form-control" ng-model="user.nazwiskoIImie" />
            </td>
            <td>
              <input type="text" class="form-control" ng-model="user.phone_number" />
            </td>
            <td>
              <input type="button" class="btn btn-success" ng-click="saveUser(user);" value="Save" />
            </td>
            <td> <input type="button" class="btn btn-danger" ng-click="cancelEdit(user);" value="Cancel" />
            </td>
          </tr>
          <!-- Szablon usuwania rekordu -->
          <tr class="danger" ng-switch-when="deleted">
            <td>{{user.nazwiskoIImie}}</td>
            <td>{{user.address}}</td>
            <td>{{user.phone_number}}</td>
            <td><input type="button" class="btn btn-danger" ng-click="deleteUser(user);" value="Del Perm." /></td>
            <td><input type="button" class="btn btn-success" ng-click="undoDelete(user)" value="Undo" /></td>
          </tr>
          <!-- Szablon wyświetlania użytkownika -->
          <tr ng-switch-default>
            <td><input type="button" class="btn btn-danger" ng-click="deleteUser(user);" value="Delete" /></td>
            <td>{{user.nazwiskoIImie}}</td>
            <td>{{user.nr_indeksu}}</td>
            <!-- <td><input type="button" class="btn btn-primary" ng-click="editUser(user);" value="Edit" /></td> -->
            <td>{{user.javaScript}}</td>
            <td>{{user.jQuery}}</td>
            <td>{{user.PHP}}</td>
            <td>0</td>
          </tr>
          <!-- Formularz dodawania rekordu -->
        <tbody>
          <tr>
            <td>
              <input type="button" class="btn btn-danger" ng-click="deleteUser(user);" value="Delete" />
            </td>
            <td>
              <input type="text" class="form-control" ng-model="newUser.nazwiskoIImie" />
            </td>
            <td>
              <input type="text" class="form-control" ng-model="newUser.phone_number" />
            </td>
            <td><input type="button" class="btn btn-primary" ng-click="addUser();" value="Add" />

            </td>
          </tr>
        </tbody>
      </table>
    </div> <!-- Koniec ng-controller -->
  </div> <!-- Koniec ng-app -->
  <div ng-app="app">
    <div ng-controller="Ctrl">
      <!-- editable element -->
      <a href="#" editable-text="user2.name">{{ user2.name || "empty" }}</a>
      <div id="debug" style="margin-top: 30px">
        {{ user | json }}
      </div>
    </div>
  </div>
</body>

</html>